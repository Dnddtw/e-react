(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){},22:function(e,t,a){},27:function(e,t,a){e.exports=a.p+"static/media/no-image.3515f7f4.png"},30:function(e,t,a){e.exports=a(44)},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),c=(a(21),a(22),a(5)),s=a(6),l=a(8),m=a(7),u=a(9),d=a(13),v=a(15),f=a(46),p=a(48),g=a(47),h="ADD_ID",_="REMOVE_ID",k="UPDATE_ID",E=function(e,t){return{type:h,payload:{id:e,title:t}}},b=function(e,t){return{type:_,payload:{id:e,title:t}}},N={id:"1111",title:"Danze",status:""};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return{id:t.payload.id,title:t.payload.title};case _:return{id:t.payload.id,title:t.payload.title,status:!1};case h:return{id:t.payload.id,title:t.payload.title,status:!0};default:return e}},y=function(){return r.a.createElement("div",{className:"header__logo-container header__logo"},r.a.createElement("a",{href:"/e-react/",className:"header__logo-link"},r.a.createElement("span",{className:"header__logo-white"},"white"),r.a.createElement("span",{className:"header__logo-onblack"},"on black")))},O=function(e){var t=e.navMenuList,a=t.map(function(e,t){var a="Home"===e?"".concat("/e-react","/"):"".concat("/e-react","/").concat(e.toLowerCase());return r.a.createElement("li",{className:"nav__item",key:t},r.a.createElement("a",{href:a,className:"nav__link"},e))});return r.a.createElement("ul",{className:"header__menu nav__list"},a)},S=["Home","About","Bookmarks"],L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(O,{navMenuList:S})))}}]),t}(n.Component),w=a(3),B=a.n(w),I=a(4),x=a(12),C=function(e){return r.a.createElement("div",{className:"search__container"},r.a.createElement("input",{className:"search__input",type:"text",onChange:e.onChangeHandler,placeholder:"Try to search anything..."}))},D=function(e){return r.a.createElement("h2",{className:"film__title"},e.title)},M=a(27),A=a.n(M),H=function(e){var t=e.poster;if(t){var a="https://image.tmdb.org/t/p/w300"+t;return r.a.createElement("img",{src:a,className:"film__image"})}return r.a.createElement("img",{src:A.a,className:"film__image"})},P=function(e){var t,a=e.genreIDs,n=e.genres;return t=0==a.length?[]:a[0]instanceof Object?a.map(function(e){return e.name}):0==a.length?["Genres: no data"]:a.map(function(e){for(var t=0;t<n.length;t++){n[t];var a=n.find(function(t){return t.id===e?t.name:void 0});if(a)return a.name}}),r.a.createElement("div",{className:"film__description"},t.join(", "))},R=a(14),V=a(28),T=a(19);R.b.add(T.a);var W=function(e){return r.a.createElement("div",{className:"bookmark ".concat(e.isBookmark)},r.a.createElement(V.a,{icon:T.a}))},$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).closestByClass=function(e,t){for(var a=new RegExp(t),n=e.className;!a.test(n);){if(!(e=e.parentNode))return!1;n="string"===typeof e.className?e.className:""}return!0},a.toggleLocalStorageBookmark=function(e){var t,n=e.toString();return localStorage.getItem(n)?(localStorage.removeItem(n),t=!1):(localStorage.setItem(n,"true"),t=!0),t?a.props.addID(e,a.props.movie.title):a.props.removeID(e,a.props.movie.title),a.updateLocalStorageBookmarkMovies(e,t),t},a.updateLocalStorageBookmarkMovies=function(e,t){var n,r=t,o=a.getLocalStorageArray();if(r)o.push(e),n=o.join("/");else if(o.length>0){var i=o.indexOf(e.toString());i>-1&&o.splice(i,1),n=o.join("/")}localStorage.setItem("ids",n)},a.getLocalStorageArray=function(){var e=localStorage.getItem("ids");return e?e.split("/"):[]},a.onBookmarkClickHandler=function(e){if(a.closestByClass(e.target,"bookmark")){e.preventDefault();var t=a.state.id,n=a.toggleLocalStorageBookmark(t)?"added":"";a.setState({isBookmark:n})}},a.state={id:e.id,isBookmark:""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem(this.state.id.toString())?"added":"";this.setState({isBookmark:e})}},{key:"render",value:function(){var e=this.props,t=e.genres,a=e.movie,n=e.id,o=(e.onClickBookmarkHandler,a.genre_ids||a.genres),i=this.props.movie.poster_path,c=a.title,s="/e-react/movie/"+n;return r.a.createElement("li",{className:"film__item film"},r.a.createElement("a",{href:s,className:"film__link",onClick:this.onBookmarkClickHandler},r.a.createElement(W,{isBookmark:this.state.isBookmark}),r.a.createElement(D,{title:c}),r.a.createElement(H,{poster:i}),r.a.createElement(P,{genreIDs:o,genres:t.genres})))}}]),t}(n.Component),G=Object(d.b)(null,function(e){return{addID:function(t,a){return e(E(t,a))},removeID:function(t,a){return e(b(t,a))}}})($),J=function(e){return r.a.createElement("li",{className:"pagination__item ".concat(e.current),onClick:function(){e.handlePage(e.page)}},e.page)},q=function(e){for(var t=e.currentPage,a=e.totalPages,n=e.handlePage,o=[],i=t-5;i<=t+5;i++)i>0&&i<=a&&o.push(i);return r.a.createElement("div",{className:"pagination pagination__container"},r.a.createElement("ul",{className:"pagination__list"},o.map(function(e,a){var o=t==e;return r.a.createElement(J,{key:a,handlePage:o?function(){}:n,page:e,current:o?"current":""})})))},z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).onChangeHandler=function(){var e=Object(x.a)(B.a.mark(function e(t){var n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.value){e.next=5;break}return a.setState({page:1,searchValue:""}),a.getMovieAsync(),e.abrupt("return");case 5:return a.setState({isLoaded:!1,searchValue:n}),r="https://api.themoviedb.org/3/search/movie?&api_key=677522a533aae20a5fa0d80d392c1496&query=".concat(n),e.next=9,fetch(r).then(function(e){return e.json()}).then(function(e){a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,movies:e.results})})},function(e){a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,error:e})})});case 9:e.sent;case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.updatePage=function(e){a.setState({page:e}),a.getMovieAsync()},a.getMovieAsync=Object(x.a)(B.a.mark(function e(){var t,n;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.page,n=a.props.isRecommendations?"https://api.themoviedb.org/3/movie/".concat(a.props.specialID,"/recommendations?api_key=677522a533aae20a5fa0d80d392c1496"):"https://api.themoviedb.org/3/movie/popular?api_key=677522a533aae20a5fa0d80d392c1496&page=".concat(t),e.next=4,fetch(n).then(function(e){return e.json()}).then(function(e){a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,movies:e.results}),totalPages:e.total_pages})},function(e){a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,error:e})})});case 4:case"end":return e.stop()}},e,this)})),a.state={page:1,totalPages:1,searchValue:"",movie:{error:null,isLoaded:!1,movies:[]},genre:{error:null,isLoaded:!1,genres:[]}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=Object(x.a)(B.a.mark(function e(){var t=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.getMovieAsync(),e.next=3,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=677522a533aae20a5fa0d80d392c1496").then(function(e){return e.json()}).then(function(e){t.setState({genre:Object(I.a)({},t.state.genre,{isLoaded:!0,genres:e.genres})})},function(e){t.setState({genre:Object(I.a)({},t.state.genre,{isLoaded:!0,error:e})})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.genre,n=e.page,o=e.totalPages,i=e.searchValue,c=t.error||a.error,s=t.isLoaded&&a.isLoaded,l=t.movies,m=(a.genres,l.length>0),u=this.props.isRecommendations;return r.a.createElement("section",{className:"main-content"},r.a.createElement("div",{className:"container"},u&&r.a.createElement("h1",{className:"recommendations__title"},"Movie recommendations"),!u&&r.a.createElement(C,{onChangeHandler:this.onChangeHandler}),c&&r.a.createElement("div",{className:"film__user color-error"},"Error: ",c.message)||!s&&r.a.createElement("div",{className:"film__user"},"Loading...")||r.a.createElement("div",null,r.a.createElement("ul",{className:"film__list"},m&&l.map(function(e,t){return u&&t<3?r.a.createElement(G,{movie:e,genres:a,key:e.id,id:e.id}):!u&&t<18?r.a.createElement(G,{movie:e,genres:a,key:e.id,id:e.id}):void 0})||r.a.createElement("div",{className:"film__user"},"The movie list is empty!"))),!i&&!u&&r.a.createElement(q,{handlePage:this.updatePage,currentPage:n,totalPages:o})))}}]),t}(n.Component),U=function(e){var t,a=e.info,n=e.onBookmarkHandler,o=e.isBookmark,i=o?"added":"";return r.a.createElement("div",{className:"info"},r.a.createElement("h1",{className:"info__title"},a.title),r.a.createElement("div",null,r.a.createElement("div",{className:"info__image-container info__item"},r.a.createElement("img",{src:"https://image.tmdb.org/t/p/w300".concat(a.poster_path),alt:a.title})),r.a.createElement("div",{className:"info__container info__item"},r.a.createElement("div",{className:"info__description"},"Original title: ".concat(a.original_title)),r.a.createElement("div",{className:"info__description"},"Tagline: ".concat(a.tagline)),r.a.createElement("div",{className:"info__description"},"Budget: $".concat(a.budget.toString().replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "))),r.a.createElement("div",{className:"info__description"},"Genres: ".concat(0==(t=a.genres).length?"no data":t.map(function(e){return e.name}).join(", "))),r.a.createElement("div",{className:"info__description"},"Homepage: ",r.a.createElement("a",{href:a.homepage,className:"info__link"},a.homepage)),r.a.createElement("div",{className:"info__description"},"Runtime: ".concat(a.runtime," minutes")),r.a.createElement("div",{className:"info__description"},"Release date: ".concat(a.release_date)),r.a.createElement("div",{className:"info__description"},"Vote avarage: ",r.a.createElement("span",{className:"color-yellow"},a.vote_average)),r.a.createElement("div",{className:"info__description"},"Vote count: ",r.a.createElement("span",{className:"color-blue"},a.vote_count)),r.a.createElement("div",{className:"info__button-container"},r.a.createElement("button",{className:"info__button ".concat(i),onClick:n},r.a.createElement(W,null)," ",r.a.createElement("span",{className:"info__button-text"},"".concat(o?"Remove from":"Add to")," favorite ")))),r.a.createElement("p",{className:"info__overview"},a.overview)))},F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).getLocalStorageArray=function(){var e=localStorage.getItem("ids");return e?e.split("/"):[]},a.onBookmarkClickHandler=function(){var e=a.state.id,t=a.toggleLocalStorageBookmark(e)?"added":"";t?a.props.addID(e,a.state.movie.movie.title):a.props.removeID(e,a.state.movie.movie.title),a.setState({isBookmark:t})},a.toggleLocalStorageBookmark=function(e){var t,n=e.toString();return localStorage.getItem(n)?(localStorage.removeItem(n),t=!1):(localStorage.setItem(n,"true"),t=!0),a.updateLocalStorageBookmarkMovies(e,t),t},a.updateLocalStorageBookmarkMovies=function(e,t){var n,r=t,o=a.getLocalStorageArray();if(r)o.push(e),n=o.join("/");else if(o.length>0){var i=o.indexOf(e.toString());i>-1&&o.splice(i,1),n=o.join("/")}localStorage.setItem("ids",n)},a.state={id:"",isBookmark:"",movie:{isLoaded:!1,movie:""}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=window.location.pathname.replace("/e-react/movie/","");this.setState({id:e})}},{key:"componentDidMount",value:function(){var e=Object(x.a)(B.a.mark(function e(){var t,a,n=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.id,a=localStorage.getItem(this.state.id.toString())?"added":"",this.setState({isBookmark:a}),e.next=5,fetch("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=677522a533aae20a5fa0d80d392c1496")).then(function(e){return e.json()}).then(function(e){n.setState({movie:Object(I.a)({},n.state.movie,{isLoaded:!0,movie:e})})},function(e){n.setState({movie:Object(I.a)({},n.state.genre,{isLoaded:!0,error:e})})});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.isBookmark,n=t.movie,o=t.error,i=t.isLoaded;return r.a.createElement("div",null,r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"container"},o&&r.a.createElement("div",{className:"film__user color-error"},"Error: ",o.message)||!i&&r.a.createElement("div",{className:"film__user"},"Loading...")||r.a.createElement(U,{info:n,isBookmark:a,onBookmarkHandler:this.onBookmarkClickHandler}))),r.a.createElement("div",{className:"recommendations"},r.a.createElement(z,{isRecommendations:!0,specialID:this.state.id})))}}]),t}(n.Component),K=Object(d.b)(null,function(e){return{addID:function(t,a){return e(E(t,a))},removeID:function(t,a){return e(b(t,a))}}})(F),Q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).getAllMovieSAsync=Object(x.a)(B.a.mark(function e(){var t,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if([],!(t=localStorage.getItem("ids"))){e.next=11;break}n=t.split("/"),r=0;case 5:if(!(r<n.length)){e.next=11;break}return e.next=8,fetch("https://api.themoviedb.org/3/movie/".concat(n[r],"?api_key=677522a533aae20a5fa0d80d392c1496")).then(function(e){return e.json()}).then(function(e){var t=a.state.movie.movies;return t.push(e),a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,movies:t}),isEmpty:!1}),e},function(e){a.setState({movie:Object(I.a)({},a.state.movie,{isLoaded:!0,error:e})})});case 8:r++,e.next=5;break;case 11:case"end":return e.stop()}},e,this)})),a.state={movie:{error:null,isLoaded:!1,movies:[]},isEmpty:!0,genre:{error:null,isLoaded:!1,genres:[]}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(x.a)(B.a.mark(function e(){var t=this;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.getAllMovieSAsync(),e.next=3,fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=677522a533aae20a5fa0d80d392c1496").then(function(e){return e.json()}).then(function(e){t.setState({genre:Object(I.a)({},t.state.genre,{isLoaded:!0,genres:e.genres})})},function(e){t.setState({genre:Object(I.a)({},t.state.genre,{isLoaded:!0,error:e})})});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.movie,a=e.genre,n=e.isEmpty,o=t.error||a.error,i=t.isLoaded&&a.isLoaded,c=t.movies,s=(a.genres,c.length>0);return r.a.createElement("section",{className:"main-content"},r.a.createElement("div",{className:"container"},o&&r.a.createElement("div",{className:"film__user color-error"},"Error: ",o.message)||n&&r.a.createElement("div",{className:"film__user"},"The list of bookmark movies is empty")||!i&&r.a.createElement("div",{className:"film__user"},"Loading...")||r.a.createElement("ul",{className:"film__list"},s&&c.map(function(e,t){return r.a.createElement(G,{movie:e,genres:a,key:e.id,id:e.id})})||r.a.createElement("div",{className:"film__user"},"The movie list is empty!"))))}}]),t}(n.Component),X=function(e){var t=e.id,a=e.title,n=e.status;return r.a.createElement("div",{className:"notification__container"},r.a.createElement("h3",{className:"notification__title"},a),r.a.createElement("p",{className:"notification__message"},"(",r.a.createElement("span",{className:"color-blue"},t),"): the movie was ",r.a.createElement("span",{className:"color-yellow"},n?"added to":"removed from")," your favorite list"))},Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.title,n=e.status;return r.a.createElement("div",{className:"notification"},r.a.createElement(X,{id:t,title:a,status:n}))}}]),t}(n.Component);var Z=Object(d.b)(function(e){return{id:e.id,title:e.title,status:e.status}})(Y),ee=Error=function(){return r.a.createElement("section",{className:"main-content"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"film__user"},"A page does not exist")))},te=Object(v.b)(j),ae=function(e){function t(){var e;return Object(c.a)(this,t),e=Object(l.a)(this,Object(m.a)(t).call(this)),te.subscribe(function(){console.log(te.getState())}),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement(d.a,{store:te},r.a.createElement("div",{className:"rsa"},r.a.createElement(Z,null),r.a.createElement(L,null),r.a.createElement(p.a,null,r.a.createElement(g.a,{path:"".concat("/e-react","/"),component:z,exact:!0}),r.a.createElement(g.a,{path:"".concat("/e-react","/movie"),component:K}),r.a.createElement(g.a,{path:"".concat("/e-react","/bookmarks"),component:Q}),r.a.createElement(g.a,{component:ee})))))}}]),t}(n.Component);i.a.render(r.a.createElement(ae,null),document.getElementById("root"))}},[[30,2,1]]]);
//# sourceMappingURL=main.36d37aa2.chunk.js.map